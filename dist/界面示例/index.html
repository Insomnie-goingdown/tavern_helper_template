<head><script type="module">/******/ var __webpack_modules__ = ({

/***/ 238
() {


// 在界面加载好后执行某个函数
// 注意: 必须使用 `$()` 而不是 `document.addEventListener('DOMContentLoaded'`, 后者会让实时修改失效
$(() => {
    toastr.success('你已经成功加载界面!', '恭喜你!');
});
// 在界面卸载时执行某个函数
$(window).on('pagehide', () => {
    toastr.info('你已经卸载界面!', '再见!');
});


/***/ },

/***/ 455
(__unused_webpack_module, exports) {

var __webpack_unused_export__;

__webpack_unused_export__ = ({ value: true });
// runtime helper for setting properties on components
// in a tree-shakable way
exports.A = (sfc, props) => {
    const target = sfc.__vccOpts || sfc;
    for (const [key, val] of props) {
        target[key] = val;
    }
    return target;
};


/***/ }

/******/ });
/************************************************************************/
/******/ // The module cache
/******/ var __webpack_module_cache__ = {};
/******/ 
/******/ // The require function
/******/ function __webpack_require__(moduleId) {
/******/ 	// Check if module is in cache
/******/ 	var cachedModule = __webpack_module_cache__[moduleId];
/******/ 	if (cachedModule !== undefined) {
/******/ 		return cachedModule.exports;
/******/ 	}
/******/ 	// Create a new module (and put it into the cache)
/******/ 	var module = __webpack_module_cache__[moduleId] = {
/******/ 		// no module.id needed
/******/ 		// no module.loaded needed
/******/ 		exports: {}
/******/ 	};
/******/ 
/******/ 	// Execute the module function
/******/ 	__webpack_modules__[moduleId](module, module.exports, __webpack_require__);
/******/ 
/******/ 	// Return the exports of the module
/******/ 	return module.exports;
/******/ }
/******/ 
/************************************************************************/
var __webpack_exports__ = {};

// EXTERNAL MODULE: ./示例/界面示例/加载和卸载时执行函数.ts
var _ = __webpack_require__(238);
;// external "VueRouter"
const external_VueRouter_namespaceObject = VueRouter;
;// external "Vue"
const external_Vue_namespaceObject = Vue;
;// ./node_modules/.pnpm/unplugin@2.3.11/node_modules/unplugin/dist/webpack/loaders/transform.js??unplugin-vue-components!./node_modules/.pnpm/unplugin@2.3.11/node_modules/unplugin/dist/webpack/loaders/transform.js??unplugin-auto-import!./node_modules/.pnpm/ts-loader@9.5.4_typescript@6.0.0-dev.20250807_webpack@5.104.1/node_modules/ts-loader/index.js??clonedRuleSet-186!./node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.26_typescript@6.0.0-dev.20250807__webpack@5.104.1/node_modules/vue-loader/dist/index.js??ruleSet[1].rules[6].use[0]!./示例/界面示例/日记.vue?vue&type=script&setup=true&lang=ts
/* unplugin-vue-components disabled */



const _hoisted_1 = { class: "message-content font-bold underline" };
/* harmony default export */ const _vue_type_script_setup_true_lang_ts = (/*@__PURE__*/(0,external_Vue_namespaceObject.defineComponent)({
    __name: '日记',
    setup(__props) {
        const display_text = (0,external_Vue_namespaceObject.ref)('');
        function captureDisplayText() {
            // 通过 substitudeMacros 我们可以解析酒馆宏
            const character_name = substitudeMacros('{{char}}');
            // 通过 getCurrentMessageId 我们可以获取界面所在的楼层号
            const message_id = getCurrentMessageId();
            // 通过 getChatMessages 我们可以获取楼层内容
            const chat_message = getChatMessages(message_id)[0];
            // 我们可以从楼层的消息中通过正则提取出对话内容, 由于这是在代码中做, 相比起直接用酒馆正则会更加方便: 我们完全可以用其他代码对文本进行更多处理
            const dialogue = chat_message.message.match(/\[查看日记[:：]\s*(.+)\]/)?.[1] ?? '';
            const text = `${character_name}: ${dialogue}`;
            display_text.value = text;
        }
        (0,external_Vue_namespaceObject.onMounted)(() => {
            captureDisplayText();
        });
        return (_ctx, _cache) => {
            return ((0,external_Vue_namespaceObject.openBlock)(), (0,external_Vue_namespaceObject.createElementBlock)("div", {
                class: "clickdiv",
                tabindex: "1",
                onClick: _cache[0] || (_cache[0] = ($event) => (_ctx.$router.push('/选择框')))
            }, [
                (0,external_Vue_namespaceObject.createElementVNode)("span", _hoisted_1, (0,external_Vue_namespaceObject.toDisplayString)((0,external_Vue_namespaceObject.unref)(display_text)), 1 /* TEXT */)
            ]));
        };
    }
}));

;// ./示例/界面示例/日记.vue?vue&type=script&setup=true&lang=ts
/* unplugin-vue-components disabled */ 
// EXTERNAL MODULE: ./node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.26_typescript@6.0.0-dev.20250807__webpack@5.104.1/node_modules/vue-loader/dist/exportHelper.js
var exportHelper = __webpack_require__(455);
;// ./示例/界面示例/日记.vue
/* unplugin-vue-components disabled */


;


const __exports__ = /*#__PURE__*/(0,exportHelper/* default */.A)(_vue_type_script_setup_true_lang_ts, [['__scopeId',"data-v-1d88b1ae"]])

/* harmony default export */ const _0 = (__exports__);
;// ./node_modules/.pnpm/unplugin@2.3.11/node_modules/unplugin/dist/webpack/loaders/transform.js??unplugin-vue-components!./node_modules/.pnpm/unplugin@2.3.11/node_modules/unplugin/dist/webpack/loaders/transform.js??unplugin-auto-import!./node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.26_typescript@6.0.0-dev.20250807__webpack@5.104.1/node_modules/vue-loader/dist/templateLoader.js??ruleSet[1].rules[4]!./node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.26_typescript@6.0.0-dev.20250807__webpack@5.104.1/node_modules/vue-loader/dist/index.js??ruleSet[1].rules[6].use[0]!./示例/界面示例/界面.vue?vue&type=template&id=64c85d38
/* unplugin-vue-components disabled */

function render(_ctx, _cache) {
  const _component_RouterView = (0,external_Vue_namespaceObject.resolveComponent)("RouterView")

  return ((0,external_Vue_namespaceObject.openBlock)(), (0,external_Vue_namespaceObject.createBlock)(_component_RouterView))
}
;// ./示例/界面示例/界面.vue?vue&type=template&id=64c85d38
/* unplugin-vue-components disabled */
;// ./示例/界面示例/界面.vue
/* unplugin-vue-components disabled */
const script = {}

;
const _exports_ = /*#__PURE__*/(0,exportHelper/* default */.A)(script, [['render',render]])

/* harmony default export */ const _1 = (_exports_);
;// ./node_modules/.pnpm/unplugin@2.3.11/node_modules/unplugin/dist/webpack/loaders/transform.js??unplugin-vue-components!./node_modules/.pnpm/unplugin@2.3.11/node_modules/unplugin/dist/webpack/loaders/transform.js??unplugin-auto-import!./node_modules/.pnpm/ts-loader@9.5.4_typescript@6.0.0-dev.20250807_webpack@5.104.1/node_modules/ts-loader/index.js??clonedRuleSet-186!./node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.26_typescript@6.0.0-dev.20250807__webpack@5.104.1/node_modules/vue-loader/dist/index.js??ruleSet[1].rules[6].use[0]!./示例/界面示例/选择框.vue?vue&type=script&setup=true&lang=ts
/* unplugin-vue-components disabled */



const _vue_type_script_setup_true_lang_ts_hoisted_1 = { class: "roleplay_options" };
const _hoisted_2 = { class: "roleplay_options_back" };
const _hoisted_3 = ["onClick"];
const _hoisted_4 = { class: "roleplay_options_title" };
const _hoisted_5 = { class: "roleplay_options_content" };
/* harmony default export */ const dist_ruleSet_1_rules_6_use_0_vue_type_script_setup_true_lang_ts = (/*@__PURE__*/(0,external_Vue_namespaceObject.defineComponent)({
    __name: '选择框',
    setup(__props) {
        const items = (0,external_Vue_namespaceObject.ref)([]);
        function extractItems() {
            const chat_message = getChatMessages(getCurrentMessageId())[0];
            const text = chat_message.message.match(/<roleplay_options>(.*?)<\/roleplay_options>/s)?.[1] ?? '';
            const item_matches = [...text.matchAll(/(.+?)[:：]\s*(.+)/gm)];
            return item_matches.map(match => ({
                title: match[1],
                content: match[2].replace(/^\$\{(.+)\}$/, '$1').replace(/^「(.+)」$/, '$1'),
            }));
        }
        (0,external_Vue_namespaceObject.onMounted)(() => {
            items.value = extractItems();
        });
        async function handleItemClick(item) {
            await createChatMessages([{ role: 'user', message: item.content }]);
            triggerSlash('/trigger');
        }
        return (_ctx, _cache) => {
            return ((0,external_Vue_namespaceObject.openBlock)(), (0,external_Vue_namespaceObject.createElementBlock)("div", _vue_type_script_setup_true_lang_ts_hoisted_1, [
                (0,external_Vue_namespaceObject.createElementVNode)("div", _hoisted_2, [
                    ((0,external_Vue_namespaceObject.openBlock)(true), (0,external_Vue_namespaceObject.createElementBlock)(external_Vue_namespaceObject.Fragment, null, (0,external_Vue_namespaceObject.renderList)((0,external_Vue_namespaceObject.unref)(items), (item) => {
                        return ((0,external_Vue_namespaceObject.openBlock)(), (0,external_Vue_namespaceObject.createElementBlock)("div", {
                            key: item.title,
                            class: "roleplay_options_item",
                            tabindex: "1",
                            onClick: ($event) => (handleItemClick(item))
                        }, [
                            (0,external_Vue_namespaceObject.createElementVNode)("span", _hoisted_4, [
                                (0,external_Vue_namespaceObject.createElementVNode)("strong", null, (0,external_Vue_namespaceObject.toDisplayString)(item.title), 1 /* TEXT */)
                            ]),
                            _cache[0] || (_cache[0] = (0,external_Vue_namespaceObject.createElementVNode)("hr", { class: "roleplay_options_hr" }, null, -1 /* CACHED */)),
                            (0,external_Vue_namespaceObject.createElementVNode)("span", _hoisted_5, (0,external_Vue_namespaceObject.toDisplayString)(item.content), 1 /* TEXT */)
                        ], 8 /* PROPS */, _hoisted_3));
                    }), 128 /* KEYED_FRAGMENT */))
                ])
            ]));
        };
    }
}));

;// ./示例/界面示例/选择框.vue?vue&type=script&setup=true&lang=ts
/* unplugin-vue-components disabled */ 
;// ./示例/界面示例/选择框.vue
/* unplugin-vue-components disabled */


;


const _exports_0 = /*#__PURE__*/(0,exportHelper/* default */.A)(dist_ruleSet_1_rules_6_use_0_vue_type_script_setup_true_lang_ts, [['__scopeId',"data-v-38053e8e"]])

/* harmony default export */ const _2 = (_exports_0);
;// ./示例/界面示例/界面.ts






const router = (0,external_VueRouter_namespaceObject.createRouter)({
    history: (0,external_VueRouter_namespaceObject.createMemoryHistory)(),
    routes: [
        { path: '/日记', component: _0 },
        { path: '/选择框', component: _2 },
    ],
});
router.replace('/日记');
$(() => {
    (0,external_Vue_namespaceObject.createApp)(_1).use(router).mount('#app');
});

;// ./示例/界面示例/index.ts




//# sourceMappingURL=index.js.map</script><style>body[data-v-1d88b1ae]{display:flex;justify-content:center;align-items:center;min-height:100px;margin:0;padding:0;font-family:"Microsoft YaHei",Arial,sans-serif}.message-content[data-v-1d88b1ae]{font-size:14px;line-height:1.4;letter-spacing:.7px;color:#7d6b6e;font-weight:bold;text-shadow:0px 1px 1px hsla(0,0%,100%,.5)}.clickdiv[data-v-1d88b1ae]{position:relative;margin:10px;max-width:150px;padding:.8em 1.2em;background:linear-gradient(135deg,rgba(255,235,240,0.62),rgba(255,202,215,0.62));border-radius:16px;cursor:pointer;outline:none;border:1px solid hsla(0,0%,100%,.7);display:flex;align-items:center;justify-content:center;box-shadow:0 4px 12px rgba(145,125,138,.15),0 0 0 1px hsla(0,0%,100%,.4) inset,0 -3px 3px hsla(0,0%,100%,.25) inset;backdrop-filter:blur(13px);-webkit-backdrop-filter:blur(13px);transition:all .3s ease;overflow:hidden}.clickdiv[data-v-1d88b1ae]:after{content:"";position:absolute;top:-50%;left:-50%;width:200%;height:200%;background:radial-gradient(circle,rgba(255,255,255,0.2) 0%,rgba(255,255,255,0) 65%);opacity:.4;pointer-events:none}.clickdiv[data-v-1d88b1ae]:hover{transform:translateY(-2px);box-shadow:0 6px 15px rgba(145,125,138,.2),0 0 0 1px hsla(0,0%,100%,.5) inset,0 -3px 3px hsla(0,0%,100%,.35) inset;background:linear-gradient(135deg,rgba(255,235,240,0.7),rgba(255,202,215,0.7))}.clickdiv[data-v-1d88b1ae]:active{transform:translateY(0);box-shadow:0 2px 8px rgba(145,125,138,.15),0 0 0 1px hsla(0,0%,100%,.4) inset}@media (max-width:999px){.clickdiv[data-v-1d88b1ae]{padding:.7em 1em;font-size:13px;max-width:240px}}
.roleplay_options_back[data-v-38053e8e]{background:linear-gradient(160deg,rgba(45,45,45,0.75),rgba(35,35,35,0.85));border-radius:14px;box-shadow:0 10px 28px rgba(0,0,0,.15),0 3px 10px rgba(0,0,0,.12);padding:16px 18px;display:flex;flex-direction:column;gap:10px;border:1px solid hsla(0,0%,100%,.06);max-width:100%;margin:20px 0}.roleplay_options_title[data-v-38053e8e]{font-size:.94em;font-weight:600;color:#f0f0f0;padding-right:12px;letter-spacing:.02em;text-align:left;margin-bottom:4px}.roleplay_options_content[data-v-38053e8e]{font-size:.94em;line-height:1.55;color:#c6c6c6;font-weight:normal;transition:color .25s ease;text-align:left;flex:1;letter-spacing:.015em;overflow-wrap:anywhere}.roleplay_options_content:not(:empty):not(.short-content)~.roleplay_options_title[data-v-38053e8e]{width:100%;margin-bottom:8px;border-bottom:1px solid hsla(0,0%,100%,.08);padding-bottom:6px}.roleplay_options_content.short-content[data-v-38053e8e]{flex:1}.roleplay_options_hr[data-v-38053e8e]{display:none}.roleplay_options_item[data-v-38053e8e]{position:relative;background:rgba(50,50,50,.65);border-radius:10px;box-shadow:0 4px 12px rgba(0,0,0,.1);padding:14px 16px;cursor:pointer;border:1px solid hsla(0,0%,100%,.04);transition:all .25s cubic-bezier(0.25,0.8,0.25,1);overflow:hidden;display:flex;flex-wrap:wrap;align-items:flex-start;z-index:1;margin:2px 0;color:#d8d8d8;font-weight:400;line-height:1.5}.roleplay_options_item[data-v-38053e8e]::after{content:"";position:absolute;top:0;left:0;width:100%;height:100%;background:linear-gradient(135deg,rgba(90,90,90,0.06) 0%,transparent 70%);opacity:0;transition:opacity .3s ease;z-index:-1}.roleplay_options_item[data-v-38053e8e]:before{content:"";position:absolute;top:0;left:0;width:3px;height:100%;background:linear-gradient(to bottom,rgba(160,160,160,0.6),rgba(180,180,180,0.3));transform:scaleY(0);transform-origin:top;transition:transform .3s cubic-bezier(0.4,0,0.2,1)}.roleplay_options_item[data-v-38053e8e]:hover{transform:translateY(-2px);box-shadow:0 6px 16px rgba(0,0,0,.15);background:rgba(58,58,58,.75);border-color:rgba(200,200,200,.12)}.roleplay_options_item[data-v-38053e8e]:hover::after{opacity:1}.roleplay_options_item:hover .roleplay_options_content[data-v-38053e8e]{color:#e2e2e2}.roleplay_options_item[data-v-38053e8e]:active{transform:translateY(-1px);box-shadow:0 3px 8px rgba(0,0,0,.12)}.roleplay_options_item[data-v-38053e8e]:hover:before{transform:scaleY(1)}@media (max-width:768px){.roleplay_options_back[data-v-38053e8e]{padding:14px;gap:8px}.roleplay_options_item[data-v-38053e8e]{padding:12px 14px}.roleplay_options_title[data-v-38053e8e]{font-size:.9em;padding-right:10px}.roleplay_options_content[data-v-38053e8e]{font-size:.9em;line-height:1.5}}@media (prefers-reduced-motion:reduce){.roleplay_options_item[data-v-38053e8e]{transition:none}.roleplay_options_item[data-v-38053e8e]::before,.roleplay_options_item[data-v-38053e8e]::after{transition:none}.roleplay_options_content[data-v-38053e8e],.roleplay_options_title[data-v-38053e8e]{transition:none}}

/*# sourceMappingURL=main.css.map*/</style></head><body><div id="app"></div></body>